@page "/Login"
@using WorkoutSample.Maui.Models
@using WorkoutSample.Maui.Contracts
@inject IAppService AppService
@inject NavigationManager NavigationManager

<EditForm Model="@loginModel" OnValidSubmit="Submit">
    <DataAnnotationsValidator/>
    <div>
        <label>Email</label>
        <InputText type="email" @bind-Value="@loginModel.Email"/>
        <ValidationMessage For="@(() => loginModel.Email)"/>
    </div>
    <div>
        <label>Password</label>
        <InputText type="password" @bind-Value="@loginModel.Password"/>
        <ValidationMessage For="@(() => loginModel.Password)"/>
    </div>
    <div>
        <NavLink href="registration">
            <span>Click here to create new account.</span>
        </NavLink>
    </div>
    <div>
        <button type="submit">
            Sign In
        </button>
    </div>
</EditForm>

@code {
    LoginModel loginModel = new();

    private async void Submit()
    {
        var response = await AppService.AuthenticateUser(loginModel);
        if (response != null)
        {
            NavigationManager.NavigateTo("/dashboard");
        }
    }

}